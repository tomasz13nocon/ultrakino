<div class="spinner-wrapper" ng-hide="film"><div class="spinner-medium"></div></div>
<div id="film-page-wrapper" ng-show="film">
	<div class="film-info">
		<img class="film-info-cover" alt="{{film.title}}" ng-src="{{film.coverFilename ? images + film.coverFilename : noImage}}">
		<div class="film-info-without-cover">
			<h1 class="film-info-title"><span ng-bind="film.title"></span> (<span ng-bind="film.year"></span>)</h1>
			<div class="film-info-info">
				<span class="film-info-info-label">Wersja: </span>
				<span ng-repeat="player in film.players"><span ng-bind="languageVersions[player.languageVersion]"></span><span ng-bind="$last ? '' : ', '"></span></span>
				<br>
				<span class="film-info-info-label">Kategorie: </span>
				<span ng-repeat="category in film.categories"><span ng-bind="categories[category]"></span><span ng-bind="$last ? '' : ', '"></span></span>
			</div>
			<p class="film-info-description" ng-bind="film.description"></p>
		</div>
	</div>
	<div class="clear"></div>

	<admin-tools ng-if="isAdmin"></admin-tools>

	<div class="player-section">

		<iframe class="player" ng-src="{{film.players[0].src | trusted}}" scrolling="no" frameborder="0" allowfullscreen="true" webkitallowfullscreen="true" mozallowfullscreen="true"></iframe>
	</div>
	<div class="below-player-section">
		<!-- <div class="views"> TODO: VIEWS
			<span ng-bind="film.views"></span>
			<span>odsłon</span>
		</div> -->
		<div class="rating">
			<div class="rating-rating">
				Ocena:
				<span class="rating-actual-rating" ng-bind="film.rating"></span><span class="rating-actual-rating" ng-show="film.rating !== null">/10</span>
				<span ng-show="film.rating === null">brak głosów</span>
			</div>
			<div class="rating-times-rated">
				Liczba głosów:
				<span ng-bind="film.timesRated"></span>
			</div>
		</div>
		<div class="rate-wrapper" ng-show="authenticated">
			<div ng-show="film.userRating === null">
				<span class="rate-label">Oceń ten film: </span>
				<span class="stars-wrapper" ng-mouseleave="filmCtrl.starMouseleave()">
					<span class="zero-star-span rate-tooltip-span" ng-mouseover="filmCtrl.starMouseover(0)" ng-click="filmCtrl.rate(0)" tooltip="0/10"></span>
					<span class="rate-tooltip-span" tooltip="{{i}}/10" ng-repeat="i in stars track by $index" ng-mouseover="filmCtrl.starMouseover(i)" ng-click="filmCtrl.rate(i)"><i class="fa fa-lg rate-star" ng-class="{'fa-star': i <= activeStar, 'fa-star-o': i > activeStar}"></i></span>
				</span>
			</div>
			<div ng-show="film.userRating !== null">
				<span class="rate-label">Twoja ocena: </span>
				<i class="fa fa-lg rate-star-disabled" ng-class="{'fa-star': i <= film.userRating, 'fa-star-o': i > film.userRating}" ng-repeat="i in stars track by $index"></i>
			</div>
		</div>
		<div class="clear"></div>
	</div>
	<div class="comment-section">
		<div class="comment-section-title">Komentarze</div>
		<div class="comment-input-wrapper">
			<form name="commentForm" class="comment-form" ng-submit="filmCtrl.postComment()">
				<textarea class="comment-input" name="comment" ng-maxlength="255" ng-minlength="3" ng-model="filmCtrl.commentContent" cols="70" rows="4" placeholder="Napisz komentarz..." />
				<div class="comment-submit-wrapper" ng-attr-tooltip="{{authenticated ? undefined : 'Zaloguj się aby dodać komentarz'}}">
					<input class="comment-submit" type="submit" value="Opublikuj" ng-disabled="authenticated ? undefined : true" />
				</div>
			</form>
		</div>
		<div class="comments">
			<div class="comment-block" ng-repeat="comment in film.comments | orderBy: 'submissionDate' : true">
				<div class="comment-info">
					<a href="#user/{{comment.addedBy.uid}}">
						<img class="comment-avatar" ng-src="{{comment.addedBy.avatarFilename}}" alt="avatar">
						<span ng-bind="comment.addedBy.username"></span>
					</a>
					<span class="comment-date-span">
						<span class="comment-time" ng-bind="comment.submissionDate.toLocaleTimeString('pl-PL')"></span>
						<span class="comment-date" ng-bind="comment.submissionDate.toLocaleDateString('pl-PL')"></span>
					</span>
				</div>
				<div class="comment-contents" ng-bind="comment.contents"></div>
			</div>
		</div>
	</div>
</div>
